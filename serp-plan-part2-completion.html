<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SERP Migration Plan - Part 2: Completion ‚Äî 16 Weeks (Manufacturing, Inventory, Final Cutover)</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: #f8f9fa;
        color: #333;
        line-height: 1.6;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        border-bottom: 2px solid #e9ecef;
        margin-bottom: 30px;
      }
      h1 {
        color: #212529;
        font-size: 1.8em;
      }
      .meta {
        color: #6c757d;
        font-size: 0.9em;
      }
      .summary-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }
      .summary-card {
        background: #fff;
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
      }
      .summary-card .value {
        font-size: 2em;
        font-weight: 700;
        color: #198754;
      }
      .summary-card .label {
        color: #6c757d;
        font-size: 0.85em;
        margin-top: 5px;
      }
      .timeline-container {
        background: #fff;
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
      }
      .timeline-header {
        display: flex;
        border-bottom: 2px solid #e9ecef;
        padding-bottom: 10px;
        margin-bottom: 15px;
      }
      .timeline-label {
        width: 220px;
        font-weight: 600;
        color: #495057;
        font-size: 0.9em;
      }
      .timeline-months {
        display: flex;
        flex: 1;
      }
      .month-col {
        flex: 1;
        text-align: center;
        font-size: 0.8em;
        font-weight: 600;
        color: #495057;
        padding: 8px 4px;
        border-left: 1px solid #e9ecef;
        background: #f8f9fa;
      }
      .month-col:first-child {
        border-left: none;
      }
      .phase-row {
        display: flex;
        align-items: center;
        margin-bottom: 12px;
      }
      .phase-label {
        width: 220px;
        font-weight: 500;
        font-size: 0.9em;
        color: #495057;
      }
      .phase-track {
        flex: 1;
        height: 44px;
        position: relative;
        display: flex;
        align-items: center;
        background: #f8f9fa;
        border-radius: 6px;
      }
      .phase-bar {
        position: absolute;
        height: 36px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 12px;
        font-size: 0.8em;
        font-weight: 500;
        color: white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
      }
      .phase-dates {
        font-size: 0.75em;
        opacity: 0.9;
      }
      .phase-detail {
        background: #fff;
        border-radius: 12px;
        margin-bottom: 30px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
        overflow: hidden;
      }
      .phase-header {
        padding: 24px;
        border-left: 5px solid;
        cursor: pointer;
        transition: background 0.2s;
      }
      .phase-header:hover {
        background: #f8f9fa;
      }
      .phase-header h2 {
        font-size: 1.3em;
        margin-bottom: 8px;
        color: #212529;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .phase-header h2 .toggle {
        font-size: 0.8em;
        color: #6c757d;
        transition: transform 0.2s;
        transform: rotate(90deg);
      }
      .phase-header.collapsed h2 .toggle {
        transform: rotate(0deg);
      }
      .phase-meta-info {
        color: #6c757d;
        font-size: 0.9em;
        margin-bottom: 12px;
      }
      .phase-goal-text {
        background: #f8f9fa;
        padding: 14px;
        border-radius: 8px;
        color: #495057;
        font-size: 0.95em;
      }
      .phase-content {
        display: block;
        padding: 0 24px 24px;
        border-top: 1px solid #e9ecef;
      }
      .phase-content.hide {
        display: none;
      }
      .section {
        margin-top: 24px;
      }
      .section h3 {
        font-size: 1.05em;
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 2px solid;
        color: #495057;
      }
      .section h4 {
        font-size: 0.95em;
        margin: 16px 0 8px;
        color: #495057;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 12px 0;
        font-size: 0.9em;
      }
      th,
      td {
        padding: 10px 12px;
        text-align: left;
        border-bottom: 1px solid #e9ecef;
      }
      th {
        background: #f8f9fa;
        font-weight: 600;
        color: #495057;
      }
      .owner-cell {
        color: #198754;
        font-weight: 600;
      }
      .copy-cell {
        color: #6c757d;
      }
      .workflow-table th:first-child {
        background: #e8f5e9;
        color: #198754;
      }
      .workflow-table th:last-child {
        background: #f3e5f5;
        color: #7b1fa2;
      }
      .workflow-table .sync-row {
        background: #fff3cd;
      }
      .workflow-table .arrow {
        text-align: center;
        color: #6c757d;
      }
      ul {
        margin: 8px 0;
        padding-left: 24px;
      }
      li {
        margin: 6px 0;
      }
      .highlight {
        background: #fff3cd;
        padding: 12px 16px;
        border-left: 4px solid;
        margin: 16px 0;
        font-weight: 500;
      }
      code {
        background: #f1f3f5;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.85em;
      }
      .gantt-container {
        overflow-x: auto;
        margin-top: 16px;
      }
      .gantt-header {
        display: flex;
        border-bottom: 2px solid #e9ecef;
        margin-bottom: 8px;
        min-width: 800px;
      }
      .gantt-label {
        width: 280px;
        min-width: 280px;
        padding: 10px;
        font-weight: 600;
        color: #495057;
        font-size: 0.85em;
      }
      .gantt-weeks {
        display: flex;
        flex: 1;
      }
      .week-col {
        flex: 1;
        text-align: center;
        padding: 8px 4px;
        font-size: 0.75em;
        font-weight: 600;
        color: #495057;
        border-left: 1px solid #e9ecef;
        background: #f8f9fa;
      }
      .week-col:first-child {
        border-left: none;
      }
      .week-dates {
        font-size: 0.7em;
        color: #6c757d;
        font-weight: 400;
      }
      .gantt-row {
        display: flex;
        align-items: center;
        min-height: 36px;
        border-bottom: 1px solid #f1f3f5;
        min-width: 800px;
      }
      .gantt-row:hover {
        background: #f8f9fa;
      }
      .task-label {
        width: 280px;
        min-width: 280px;
        padding: 6px 10px;
        font-size: 0.85em;
        color: #495057;
      }
      .task-track {
        display: flex;
        flex: 1;
        position: relative;
        height: 26px;
      }
      .task-cell {
        flex: 1;
        border-left: 1px solid #f1f3f5;
      }
      .task-cell:first-child {
        border-left: none;
      }
      .task-bar {
        position: absolute;
        height: 20px;
        top: 3px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7em;
        font-weight: 500;
        color: white;
      }
      .milestones {
        background: #fff;
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 30px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
      }
      .milestones h3 {
        margin-bottom: 20px;
        color: #495057;
        font-size: 1.1em;
      }
      .milestone-item {
        display: flex;
        align-items: center;
        padding: 14px 0;
        border-bottom: 1px solid #e9ecef;
      }
      .milestone-item:last-child {
        border-bottom: none;
      }
      .milestone-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 15px;
      }
      .milestone-info {
        flex: 1;
      }
      .milestone-name {
        font-weight: 500;
        color: #212529;
      }
      .milestone-phase {
        font-size: 0.85em;
        color: #6c757d;
      }
      .milestone-date {
        font-weight: 600;
        color: #198754;
      }
      .migration-events {
        background: #fff;
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
      }
      .migration-events h3 {
        margin-bottom: 5px;
        color: #495057;
      }
      .migration-event {
        display: flex;
        align-items: flex-start;
        padding: 12px 0;
        border-bottom: 1px solid #f1f3f5;
      }
      .migration-event:last-child {
        border-bottom: none;
      }
      .migration-event-phase {
        width: 100px;
        min-width: 100px;
        font-weight: 600;
        font-size: 0.85em;
      }
      .migration-event-week {
        width: 80px;
        min-width: 80px;
        color: #6c757d;
        font-size: 0.85em;
      }
      .migration-event-info {
        flex: 1;
      }
      .migration-event-name {
        font-weight: 600;
        margin-bottom: 4px;
      }
      .migration-event-desc {
        color: #6c757d;
        font-size: 0.85em;
      }
      .migration-event-tables {
        margin-top: 6px;
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }
      .migration-event-tables code {
        background: #e9ecef;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.75em;
      }
      @media print {
        .phase-content {
          display: block !important;
        }
        .phase-header {
          break-after: avoid;
        }
        .phase-detail {
          break-inside: avoid;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div>
          <h1>SERP Migration Plan - Part 2: Completion ‚Äî 16 Weeks (Manufacturing, Inventory, Final Cutover)</h1>
          <div class="meta" id="meta"></div>
        </div>
      </header>
      <div class="summary-cards" id="summary"></div>
      <div class="timeline-container">
        <div class="timeline-header">
          <div class="timeline-label">Phase</div>
          <div class="timeline-months" id="months"></div>
        </div>
        <div id="timeline"></div>
        <div style="margin-top: 12px; font-size: 0.8em; color: #6c757d">
          <strong>‚à•</strong> = Phases run in parallel
        </div>
      </div>
      <div class="migration-events">
        <h3>üì¶ Data Migration Timeline</h3>
        <p style="color: #6c757d; font-size: 0.9em; margin-bottom: 15px">
          When Odoo data gets imported into SERP tables
        </p>
        <div id="migration-events"></div>
      </div>
      <div class="milestones">
        <h3>Key Milestones</h3>
        <div id="milestones"></div>
      </div>
      <h2 style="margin: 30px 0 20px; color: #495057; font-size: 1.3em">Phase Details</h2>
      <div id="phases-detail"></div>
          <!-- Future Improvements -->
      <div class="phase-detail" style="margin-top: 40px">
        <div
          class="phase-header"
          style="border-left-color: #6c757d"
          onclick="togglePhase('future')"
        >
          <h2><span class="toggle">‚ñ∂</span> Future Improvements</h2>
          <div class="phase-meta-info">Features not currently in Odoo ‚Äî to be built as needed</div>
          <div class="phase-goal-text">
            These are <strong>new capabilities</strong> that don't exist in Odoo today. They can be
            built in SERP independently of the core migration phases, prioritized by business need.
          </div>
        </div>
        <div class="phase-content" id="phase-content-future">
          <div class="section">
            <h3 style="border-color: #6c757d">Why These Are Separate</h3>
            <div class="highlight" style="border-color: #0d6efd; background: #e3f2fd">
              <strong>These features don't exist in Odoo.</strong> The main migration phases focus
              on replacing existing Odoo functionality. These improvements are net-new capabilities
              that can be built on-demand.
            </div>
          </div>
          <div class="section">
            <h3 style="border-color: #6c757d">Available Improvements</h3>
            <div
              style="
                background: #f8f9fa;
                border-radius: 8px;
                padding: 20px;
                margin: 16px 0;
                border-left: 4px solid #198754;
              "
            >
              <h4 style="margin: 0 0 12px 0; color: #212529">Blanket PO Tracking</h4>
              <p style="margin: 0 0 12px 0; color: #495057">
                Track long-term vendor agreements with multiple releases. SERP manages the
                agreement, Odoo receives individual release POs.
              </p>
              <ul style="color: #495057; font-size: 0.9em">
                <li>
                  <strong>Create Agreement:</strong> Blanket PO in SERP with total qty, price terms,
                  validity period
                </li>
                <li>
                  <strong>Release Orders:</strong> Each release creates a real purchase.order in
                  Odoo
                </li>
                <li>
                  <strong>Track Usage:</strong> SERP tracks total released vs. agreement amount
                </li>
              </ul>
              <div
                style="
                  margin-top: 12px;
                  padding: 8px 12px;
                  background: #fff3cd;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              >
                <strong>Why not in Odoo:</strong> No native blanket/framework PO support exists.
              </div>
            </div>
            <div
              style="
                background: #f8f9fa;
                border-radius: 8px;
                padding: 20px;
                margin: 16px 0;
                border-left: 4px solid #fd7e14;
              "
            >
              <h4 style="margin: 0 0 12px 0; color: #212529">PO Approval Workflows</h4>
              <p style="margin: 0 0 12px 0; color: #495057">
                Route POs for approval based on amount thresholds. Notify via Slack, update Odoo
                when approved.
              </p>
              <ul style="color: #495057; font-size: 0.9em">
                <li>
                  <strong>Threshold Rules:</strong> POs over $X need manager, over $Y need director
                </li>
                <li>
                  <strong>Multi-Step:</strong> Ops approval first, then Finance for larger amounts
                </li>
                <li>
                  <strong>Slack Integration:</strong> Approver receives Slack message with
                  approve/reject buttons
                </li>
              </ul>
              <div
                style="
                  margin-top: 12px;
                  padding: 8px 12px;
                  background: #fff3cd;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              >
                <strong>Why not in Odoo:</strong> studio_approval_rule exists but has 0 active rules
                configured.
              </div>
            </div>
            <div
              style="
                background: #f8f9fa;
                border-radius: 8px;
                padding: 20px;
                margin: 16px 0;
                border-left: 4px solid #dc3545;
              "
            >
              <h4 style="margin: 0 0 12px 0; color: #212529">
                Supplier Forecast ‚Üí Odoo Integration
              </h4>
              <p style="margin: 0 0 12px 0; color: #495057">
                Turn SERP supplier forecasts into draft POs in Odoo with one click.
              </p>
              <ul style="color: #495057; font-size: 0.9em">
                <li>
                  <strong>Generate:</strong> Supplier Forecast calculates what to order based on
                  demand
                </li>
                <li><strong>Review:</strong> User reviews and adjusts suggested quantities</li>
                <li>
                  <strong>Push:</strong> Click "Send to Odoo" to create draft purchase.order records
                </li>
              </ul>
              <div
                style="
                  margin-top: 12px;
                  padding: 8px 12px;
                  background: #fff3cd;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              >
                <strong>Why not in Odoo:</strong> Odoo has no forecasting integration. Tool exists
                in SERP already.
              </div>
            </div>
            <div
              style="
                background: #f8f9fa;
                border-radius: 8px;
                padding: 20px;
                margin: 16px 0;
                border-left: 4px solid #6f42c1;
              "
            >
              <h4 style="margin: 0 0 12px 0; color: #212529">Inventory Adjustment Approvals</h4>
              <p style="margin: 0 0 12px 0; color: #495057">
                Require approval for manual inventory adjustments above a threshold.
              </p>
              <ul style="color: #495057; font-size: 0.9em">
                <li><strong>Request:</strong> User submits adjustment with reason code</li>
                <li><strong>Threshold Check:</strong> Large adjustments require approval</li>
                <li><strong>Audit Trail:</strong> Log who requested, who approved, and why</li>
              </ul>
              <div
                style="
                  margin-top: 12px;
                  padding: 8px 12px;
                  background: #fff3cd;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              >
                <strong>Why not in Odoo:</strong> Odoo allows direct adjustments with no approval
                gate.
              </div>
            </div>
            <div
              style="
                background: #f8f9fa;
                border-radius: 8px;
                padding: 20px;
                margin: 16px 0;
                border-left: 4px solid #0dcaf0;
              "
            >
              <h4 style="margin: 0 0 12px 0; color: #212529">Shopify Order Integration</h4>
              <p style="margin: 0 0 12px 0; color: #495057">
                Pull Shopify orders directly into SERP for automated inventory adjustments, replacing
                the current manual process of monthly WCC reports.
              </p>
              <ul style="color: #495057; font-size: 0.9em">
                <li>
                  <strong>Auto-Import:</strong> Shopify orders flow into SERP automatically via API
                </li>
                <li>
                  <strong>Inventory Deductions:</strong> SERP adjusts inventory in real-time instead of
                  monthly manual adjustments
                </li>
                <li>
                  <strong>COGS Tracking:</strong> FIFO cost applied to Shopify orders same as all other
                  order types
                </li>
              </ul>
              <div
                style="
                  margin-top: 12px;
                  padding: 8px 12px;
                  background: #fff3cd;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              >
                <strong>Why post-launch:</strong> Odoo currently receives manual monthly adjustments
                from WCC reports ‚Äî not a direct Shopify integration. Manual adjustments will still work
                in SERP. Full Shopify integration is a net-new capability.
              </div>
            </div>
          </div>
    </div>
    <script>
      // Part 2 starts when Part 1 Phase 3 ends (Feb 16 + 9w Phase 1 + 8w Phase 3 = Jun 15)
      // Phase 5 (Kits, 8w) runs parallel with Phase 4, both start Jun 15
      const PROJECT_START = '2026-06-15';
      const project = { startDate: PROJECT_START, preparedBy: 'Jack Kiefer' };

      const phases = [
{
          id: 4,
          name: 'Manufacturing, Adjustments, BOMs, Locations & Products',
          shortName: 'MO+Adj+BOMs+Loc+Prod',
          weeks: 12,
          deps: [3],
          parallelWith: [5],
          color: '#9b59b6',
          milestone: 'MO, Adjustments, BOMs, Locations & Products Live',
          goal: 'Product UI first, then import ALL Odoo products into SERP. Then build remaining Odoo features. Users switch to SERP UI, which dual-writes to both Odoo (XML-RPC) and SERP tables (stock_quants). Incremental by feature.',
          goals: [
            'FIRST: Build product management UI in SERP so all products can be managed there',
            'Import ALL Odoo products (~3,900 missing) into SERP via product UI ‚Äî raw materials, packed products, labels, cartons, etc. Currently only ~598 exist (packaging only). Every Odoo product_id in BOMs/MOs/stock_quant must have a SERP equivalent before migration.',
            'Backfill components.odoo_id mapping ‚Äî current values are external references ("800" + component.id), need real Odoo product_product.id for migration FK resolution',
            'Build remaining features in SERP that replicate Odoo functionality',
            'Users switch to SERP UI for each feature (stop using Odoo UI)',
            'Dual-write: SERP sends XML-RPC to Odoo AND updates SERP shadow tables',
            'stock_quants table is independent (no linkage to component/RM inventory yet)',
            'Incremental rollout: Product UI ‚Üí Product Import ‚Üí Manufacturing ‚Üí Adjustments ‚Üí BOMs (normal only, kits in Phase 5) ‚Üí Stock Locations',
            'Track COGS correctly throughout transition',
          ],
          tasks: [
            { name: 'Build product management UI with cost tracking', startWeek: 1, duration: 2 },
            {
              name: 'Import ~3,900 missing Odoo products into SERP via product UI (raw materials, packed products, labels, cartons, etc.)',
              startWeek: 3,
              duration: 1,
            },
            { name: 'Backfill real Odoo product_product.id mapping (SKU match + update odoo_id)', startWeek: 3, duration: 1 },
            {
              name: 'Build MO UI, creation/tracking/completion/scrapping',
              startWeek: 4,
              duration: 2,
            },
            { name: 'Build inventory adjustments with COGS tracking', startWeek: 4, duration: 2 },
            { name: 'Build BOM management UI (normal BOMs only ‚Äî kit/phantom BOMs in Phase 5)', startWeek: 5, duration: 2 },
            { name: 'Build stock_locations and location UI', startWeek: 6, duration: 2 },
            { name: 'Migrate MOs, BOMs, locations from Odoo', startWeek: 7, duration: 2 },
            { name: 'Cutover products: SERP becomes SOT for product management', startWeek: 9, duration: 1 },
            { name: 'Cutover MO + adjustments: disable Odoo UIs', startWeek: 10, duration: 1 },
            { name: 'Cutover BOMs + locations: disable Odoo UIs', startWeek: 11, duration: 1 },
            {
              name: 'End-to-end testing, COGS validation, stabilization',
              startWeek: 12,
              duration: 1,
            },
          ],
          workflow: [
            {
              laravel: 'User performs action in SERP UI (stops using Odoo UI)',
              odoo: 'Odoo UI disabled for this feature',
            },
            {
              laravel: 'SERP dual-writes: XML-RPC to Odoo + update stock_quants',
              odoo: 'Receives sync, stays in sync',
              sync: true,
            },
            {
              laravel: 'stock_quants updated independently (not linked to component inventory)',
              odoo: '‚Äî',
            },
            { laravel: 'MO created/completed/scrapped in SERP', odoo: 'XML-RPC sync', sync: true },
            {
              laravel: 'Inventory adjustment in SERP + COGS tracking',
              odoo: 'XML-RPC sync',
              sync: true,
            },
            { laravel: 'Normal (non-kit) BOM create/edit in SERP (kit BOMs in Phase 5)', odoo: 'XML-RPC sync', sync: true },
            { laravel: 'Location management in SERP', odoo: 'XML-RPC sync', sync: true },
            { laravel: 'Product management in SERP', odoo: 'XML-RPC sync', sync: true },
          ],
          dataOwnership: [
            { data: 'Manufacturing orders', laravel: 'UI + Owner', odoo: 'Synced via XML-RPC' },
            { data: 'Inventory adjustments', laravel: 'UI + Owner', odoo: 'Synced via XML-RPC' },
            { data: 'BOMs (normal only ‚Äî kit/phantom BOMs in Phase 5)', laravel: 'UI + Owner', odoo: 'Synced via XML-RPC' },
            { data: 'Stock locations', laravel: 'UI + Owner', odoo: 'Synced via XML-RPC' },
            { data: 'Products (5,809)', laravel: 'UI + Owner', odoo: 'Synced via XML-RPC' },
            {
              data: 'stock_quants (shadow)',
              laravel: 'Owner (independent)',
              odoo: 'Has its own copy',
            },
            { data: 'component_inventory', laravel: 'Unchanged', odoo: '‚Äî' },
            { data: 'Valuation layers (COGS)', laravel: 'Owner', odoo: '‚Äî' },
          ],
          implementation: [
            '--- PRODUCT UI + IMPORT (Weeks 1-3) ---',
            '‚Ä¢ Build product management UI first so all products are managed in SERP',
            '‚Ä¢ Laravel components table currently has ~598 records (mostly packaging: boxes, inserts, shippers)',
            '‚Ä¢ Odoo has ~4,300 active storable products with SKUs referenced in BOMs/MOs/stock_quant',
            '‚Ä¢ Missing ~3,900 products: raw materials (candy, cookies, etc.), packed products, labels, cartons, gift sets, etc.',
            '‚Ä¢ Import all Odoo products into SERP via the new product UI / bulk import tool',
            '‚Ä¢ Set odoo_id = "800" + component.id per existing convention (Component.php setOddoId())',
            '‚Ä¢ Also need real Odoo product_product.id mapping: match by SKU (components.sku = product_product.default_code) for migration FK resolution',
            '‚Ä¢ 5 existing components already have real Odoo IDs (hot sauce foam inserts, ids 646-650)',
            '‚Ä¢ ~160 Odoo products without SKUs are junk (copies, freight charges) ‚Äî skip these',
            '--- END PRODUCT UI + IMPORT ---',
            'Incremental rollout: Product UI ‚Üí Product Import ‚Üí MO ‚Üí Adjustments ‚Üí BOMs (normal only) ‚Üí Locations',
            'Pattern: build feature in SERP ‚Üí users switch to SERP UI ‚Üí disable Odoo UI',
            'Dual-write on every action: XML-RPC to Odoo + update SERP tables',
            '--- USES SYNC QUEUE FROM PHASE 3 ---',
            '‚Ä¢ Same odoo_sync_queue table and infrastructure built in Phase 3',
            '‚Ä¢ Extend with new entity_types: mrp_production, stock_move, mrp_bom, stock_location, product',
            '‚Ä¢ Same retry logic, DLQ, circuit breaker patterns',
            '--- END SYNC QUEUE ---',
            'stock_quants is independent shadow table (NOT linked to component/RM inventory)',
            'Existing component_inventory unchanged during this phase',
            'Manufacturing: MO in SERP, dual-writes to Odoo mrp_production',
            'MO scrapping/cancellation: cancel defective MOs, reverse any partial consumption',
            'Adjustments: adjustment in SERP updates stock_quants + XML-RPC to Odoo stock_move',
            'BOMs: normal (non-kit) BOM management in SERP, syncs to Odoo mrp_bom. Kit/phantom BOMs handled in Phase 5',
            'Stock locations: location hierarchy in SERP, syncs to Odoo stock_location',
            'Products: product info in SERP, syncs to Odoo product_product',
            'COGS tracking: valuation layers updated on MO completion and adjustments',
            'Odoo stays in sync but users stop using Odoo UI for migrated features',
            'Python function suite: reusable functions for inventory ops that maintain DB integrity',
            'Functions: make_adjustment(), receive_arrival(), complete_mo(), scrap_mo()',
            'All functions enforce COGS structure, update valuation layers, log transactions',
          ],
          confirmations: [
            'Production team - MO creation and completion workflow',
            'Warehouse team - inventory adjustments and location management',
            'Finance team - COGS calculations and valuation accuracy',
            'Operations team - BOM management and product info',
          ],
          keyPoint:
            'Product UI built FIRST (Weeks 1-2), then import ~3,900 missing Odoo products via SERP (Week 3). Then build remaining features: MO, adjustments, BOMs, locations. Dual-writes to Odoo throughout. stock_quants is independent (not linked to component inventory yet).',
        },
{
          id: 6,
          name: 'Inventory Management',
          shortName: 'Inventory',
          weeks: 6,
          deps: [4],
          color: '#dc3545',
          milestone: 'Full Inventory Cutover',
          goal: 'Make SERP the source of truth for inventory. Migrate all inventory + FIFO layers from Odoo. Build financial reports for Ric. Update all code to use inventory views. Deprecate Odoo.',
          goals: [
            'Migrate all inventory from Odoo to SERP stock_quant (quantities + FIFO cost layers)',
            'Make stock_quant the single source of truth for inventory',
            'Update all code to JOIN inventory views instead of reading inventory_qty columns (views created in Phase 1)',
            'Build financial reports for Ric (Valuation, Roll Forward, FIFO COGS, Cost Tracking)',
            'Complete cutover: activate SERP queues, disable Odoo sync',
          ],
          tasks: [
            {
              name: 'Build financial reports (Valuation, Roll Forward, FIFO COGS)',
              startWeek: 1,
              duration: 1,
            },
            {
              name: 'Update all code to use inventory views (replace inventory_qty reads)',
              startWeek: 1,
              duration: 1,
            },
            {
              name: '‚ö° PARALLEL RUN: compare SERP vs Odoo inventory daily',
              startWeek: 2,
              duration: 3,
            },
            {
              name: 'Freeze Odoo, migrate inventory + FIFO layers to SERP',
              startWeek: 5,
              duration: 1,
            },
            {
              name: 'Physical count, reconcile, validate with Ric + go-live',
              startWeek: 6,
              duration: 1,
            },
          ],
          workflow: [
            { laravel: 'stock_quant is source of truth for inventory quantities', odoo: '‚Äî' },
            { laravel: 'Inventory views created in Phase 1 ‚Äî code updated here to use them', odoo: '‚Äî' },
            { laravel: 'Order queue built in Phase 2, expanded in Phase 7 ‚Äî processes all orders', odoo: '‚Äî' },
            { laravel: 'Parallel run: SERP and Odoo both track inventory, compare daily', odoo: 'Still active' },
            { laravel: 'Cutover: freeze Odoo, migrate inventory + FIFO layers to SERP', odoo: 'Frozen' },
            { laravel: 'Physical count reconciliation, validate with Ric, go-live', odoo: 'Deprecated' },
          ],
          dataOwnership: [
            { data: 'stock_quant (source of truth)', laravel: 'Owner', odoo: 'Deprecated' },
            { data: 'FIFO valuation layers', laravel: 'Owner', odoo: 'Deprecated' },
            { data: 'COGS (cost_unit on items/component_orders)', laravel: 'Owner', odoo: '‚Äî' },
            { data: 'Financial reports (Valuation, Roll Forward, COGS)', laravel: 'Owner', odoo: '‚Äî' },
          ],
          implementation: {
            'Code Migration (inventory views created in Phase 1)': [
              'Find all code reading receiver_products.inventory_qty ‚Üí change to JOIN receiver_product_inventory',
              'Find all code reading components.inventory_qty ‚Üí change to JOIN component_inventory',
              'Update queries, reports, dashboards, APIs that reference inventory columns',
              'Test all inventory-related features with new views',
            ],
            'Financial Reports': [
              'Inventory Valuation Report: current value of all stock by product/location',
              'Inventory Roll Forward: beginning + purchases + MO output - COGS - adjustments = ending',
              'FIFO COGS Report: cost breakdown per order/shipment using valuation layers',
              'Cost Tracking: unit cost trends over time by product',
            ],
            'Data Migration': [
              'Export all receiver_product inventory from Odoo stock_quant (14K rows) to SERP stock_quant',
              'Export all component inventory from Odoo stock_quant to SERP stock_quant',
              'Export active FIFO cost layers from Odoo stock_valuation_layer (~3.7K rows with remaining_qty > 0, NOT all 13.4M historical records)',
              'Export stock_scrap (1.4K), stock_landed_cost (87), stock_landed_cost_lines (88)',
              'Map Odoo product_id references to SERP component_id via product mapping built in Phase 4 Week 1',
              'Physical count reconciliation to verify migrated quantities',
            ],
          },
          cutoverChecklist: [
            'All inventory data migrated from Odoo to SERP stock_quant',
            'All FIFO valuation layers migrated from Odoo to SERP',
            'All code updated to use inventory views (no direct inventory_qty reads)',
            'Parallel run completed ‚Äî SERP and Odoo inventory match',
            'COGS accuracy validated between Odoo and SERP',
            'Physical count reconciliation completed',
            'Financial reports reviewed and approved by Ric',
            'Legacy tables dropped (serp_audit_logs, component_shelves, etc.)',
            'Odoo order sync disabled',
            'Rollback plan documented and tested',
          ],
          confirmations: [
            'Ops - inventory counts match stock_quant',
            'Finance - COGS calculations and valuation accuracy',
            'Tech - all syncs work',
          ],
          keyPoint:
            'SERP becomes source of truth. Inventory migrated from Odoo, views already built in Phase 1, order queue already built in Phase 2/7. This phase migrates data, updates code, builds reports, and cuts over.',
        },
{
          id: 7,
          name: 'Laravel Order Queue (All Orders)',
          shortName: 'Laravel All Orders',
          weeks: 2,
          deps: [4],
          parallelWith: [6],
          color: '#e74c3c',
          milestone: 'All Orders Process Through SERP',
          goal: 'Laravel developer expands the order queue built in Part 1 Phase 2 (custom branding only) to process ALL ec_order types through SERP inventory APIs.',
          goals: [
            'Remove merchandise_selections filter ‚Äî process ALL orders, not just custom branding',
            'Expand to handle receiver product orders (items table) via same SERP /api/orders/* APIs',
            'Expand to handle kit/component orders (component_orders table) via same SERP APIs',
            'Same pattern as Phase 2: reserve on create, ship on fulfillment, cancel on cancellation',
            'Full parallel run with all order types before Odoo sync is disabled',
          ],
          tasks: [
            {
              name: 'Expand order detection to all ec_order types + receiver products',
              startWeek: 1,
              duration: 1,
            },
            {
              name: 'Integration testing with all order types + stabilization',
              startWeek: 2,
              duration: 1,
            },
          ],
          workflow: [
            {
              laravel: 'Remove merchandise_selections filter: detect ALL new ec_orders',
              odoo: '‚Äî',
            },
            { laravel: 'On order create: POST /api/orders/reserve for items + component_orders', odoo: '‚Äî' },
            { laravel: 'Store response: picking_id, stock_move_id on items/component_orders', odoo: '‚Äî' },
            { laravel: 'On ship: POST /api/orders/ship ‚Üí store cost_unit (FIFO)', odoo: '‚Äî' },
            { laravel: 'On cancel: POST /api/orders/cancel ‚Üí release reservations', odoo: '‚Äî' },
            { laravel: 'Same SERP APIs built in Phase 1 ‚Äî no new endpoints needed', odoo: '‚Äî' },
          ],
          dataOwnership: [
            { data: 'All ec_order inventory (not just custom branding)', laravel: 'Queued to SERP', odoo: '‚Äî' },
            { data: 'items.stock_move_id + cost_unit', laravel: 'Owner (written by SERP)', odoo: '‚Äî' },
            { data: 'component_orders.stock_move_id + cost_unit', laravel: 'Owner (written by SERP)', odoo: '‚Äî' },
          ],
          implementation: [
            '--- EXPANDS PART 1 PHASE 2 ---',
            '‚Ä¢ Same integration pattern built for custom branding in Phase 2',
            '‚Ä¢ Same SERP APIs: /api/orders/reserve, /ship, /cancel',
            '‚Ä¢ Same response storage: picking_id, stock_move_id, cost_unit',
            '--- CHANGES REQUIRED ---',
            'Remove merchandise_selections IS NOT NULL filter from order detection',
            'Add receiver product mapping: items.product_sku ‚Üí receiver_products ‚Üí SERP reserve',
            'Handle all three order types: receiver orders, kit/component orders, custom branding',
            'Test with high-volume order flow (all orders, not just custom branding subset)',
            'Validate COGS write-back (cost_unit) for all order types',
            'Monitor queue depth and processing latency under full load',
          ],
          confirmations: [
            'Ops team - all order types process correctly through SERP',
            'Finance team - COGS accurate for receiver products, kits, and custom branding',
          ],
          keyPoint:
            'Laravel developer task (parallel with Phase 6). Expands Part 1 Phase 2 queue from custom branding only to ALL orders using same SERP /api/orders/* APIs. 2 weeks of work.',
        }
      ];

      // Migration events - Part 1 only includes events for phases 1, 2, 3, 5
      const migrationEvents = [
{
          phase: 4,
          week: 3,
          name: 'Import ALL Odoo Products into SERP (via Product UI)',
          desc: 'Product management UI built in Weeks 1-2. Now import ~3,900 missing Odoo products into SERP via bulk import. Currently ~598 components exist (packaging only). Missing: raw materials, packed products, labels, cartons, gift sets, etc. Match by SKU (components.sku = product_product.default_code). Set odoo_id = "800" + component.id per existing convention. Without this, no BOM/MO/stock_quant migration can proceed.',
          tables: [
            'Odoo product_product (4,300 active storable with SKUs) ‚Üí import into SERP via product UI',
            'SKU matching: product_product.default_code = components.sku',
            'odoo_id convention: "800" + components.id (external reference, not Odoo internal ID)',
            'Map real Odoo product_product.id for migration FK references',
            '~160 Odoo products without SKUs skipped (junk/copies/freight)',
          ],
          color: '#9b59b6',
        },
{
          phase: 4,
          week: 5,
          name: 'Import MO/BOM/Location Data',
          desc: 'Import manufacturing orders, normal BOMs (kit/phantom BOMs in Phase 5), and locations from Odoo. Product mapping already complete from Week 3.',
          tables: [
            'mrp_production (26K) ‚Üí SERP mrp_production',
            'mrp_bom (2K normal) ‚Üí SERP mrp_bom',
            'mrp_bom_line (6.5K) ‚Üí SERP mrp_bom_line',
            'mrp_unbuild (190) ‚Üí SERP mrp_unbuild',
            'stock_location (2.7K) ‚Üí SERP stock_location',
            'stock_picking_type (135) ‚Üí SERP stock_picking_type',
            'uom_category (7) + uom_uom (27) ‚Üí seed SERP tables',
          ],
          color: '#9b59b6',
        },
{
          phase: 6,
          week: 4,
          name: 'Test Inventory Import (Optional)',
          desc: 'Practice run: export Odoo inventory snapshot to validate import scripts. Data will be stale - for testing only. Tests the full pipeline without going live.',
          tables: [
            'stock_quant (14K) - TEST ONLY',
            'stock_valuation_layer (sample active layers) - TEST ONLY',
            'Validate import scripts + mapping',
          ],
          color: '#ffc107',
        },
{
          phase: 6,
          week: 8,
          name: 'üö® INVENTORY CUTOVER',
          desc: 'THE migration moment. Freeze Odoo, physical count, import current inventory. This is the only time inventory data is imported for real. Only active FIFO layers migrated (not 13.4M historical records).',
          tables: [
            'stock_quant (14K) - LIVE ‚Üí SERP stock_quant',
            'stock_valuation_layer (~3.7K active layers, remaining_qty > 0) ‚Üí SERP stock_valuation_layer',
            'stock_scrap (1.4K) ‚Üí SERP stock_scrap',
            'stock_landed_cost (87) ‚Üí SERP stock_landed_cost',
            'stock_landed_cost_lines (88) ‚Üí SERP stock_landed_cost_lines',
          ],
          color: '#dc3545',
        },
{
          phase: 6,
          week: 9,
          name: 'Odoo Deprecated',
          desc: 'Validate inventory accuracy, reconcile counts with system, train warehouse team. Odoo becomes read-only archive.',
          tables: [
            'Physical count validation',
            'Book vs actual reconciliation',
            'Odoo ‚Üí read-only',
          ],
          color: '#dc3545',
        }
      ];

      function addDays(d, n) {
        const r = new Date(d);
        r.setDate(r.getDate() + n);
        return r;
      }
      function addWeeks(d, w) {
        return addDays(d, w * 7);
      }
      function fmt(d) {
        return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
      }
      function fmtFull(d) {
        return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      }

      function calcSchedules() {
        const start = new Date(project.startDate);
        const ends = new Map();
        return phases.map((p) => {
          let s = start;
          p.deps.forEach((id) => {
            const e = ends.get(id);
            if (e && e > s) s = e;
          });
          const e = addWeeks(s, p.weeks);
          ends.set(p.id, e);
          return {
            phase: p,
            start: s,
            end: e,
            isParallel: p.parallelWith && p.parallelWith.length > 0,
          };
        });
      }

      function renderPhaseDetail(sched) {
        const p = sched.phase;
        const start = sched.start;
        let html = `<div class="phase-detail">
    <div class="phase-header" style="border-left-color:${p.color}" onclick="togglePhase(${p.id})">
      <h2><span class="toggle">‚ñ∂</span> Phase ${p.id}: ${p.name}</h2>
      <div class="phase-meta-info">${fmtFull(sched.start)} ‚Üí ${fmtFull(sched.end)} (${p.weeks} weeks)${sched.isParallel ? ' ‚Ä¢ Runs in parallel' : ''}</div>
      <div class="phase-goal-text">${p.goal}</div>
    </div>
    <div class="phase-content" id="phase-content-${p.id}">`;

        // Goals
        if (p.goals && p.goals.length) {
          html += `<div class="section"><h3 style="border-color:${p.color}">Goals</h3><ul>`;
          p.goals.forEach((g) => (html += `<li>${g}</li>`));
          html += `</ul></div>`;
        }

        // Workflow
        html += `<div class="section"><h3 style="border-color:${p.color}">How It Works</h3>`;
        if (Array.isArray(p.workflow)) {
          html += `<table class="workflow-table"><tr><th>SERP (Laravel)</th><th style="width:40px"></th><th>Odoo</th></tr>`;
          p.workflow.forEach((row) => {
            if (row.laravel.startsWith('---')) {
              const headerText = row.laravel.replace(/^-+\s*/, '').replace(/\s*-+$/, '');
              html += `<tr><td colspan="3" style="background:${p.color}15;color:${p.color};font-weight:600;text-align:center;padding:12px;border-top:2px solid ${p.color}">${headerText}</td></tr>`;
            } else {
              const rowClass = row.sync ? 'sync-row' : '';
              const arrow = row.sync ? '‚Üí' : '';
              html += `<tr class="${rowClass}"><td>${row.laravel}</td><td class="arrow">${arrow}</td><td>${row.odoo}</td></tr>`;
            }
          });
          html += `</table>`;
        } else {
          Object.entries(p.workflow).forEach(([header, rows]) => {
            html += `<h4>${header}</h4><table class="workflow-table"><tr><th>SERP (Laravel)</th><th style="width:40px"></th><th>Odoo</th></tr>`;
            rows.forEach((row) => {
              if (row.laravel.startsWith('---')) {
                const headerText = row.laravel.replace(/^-+\s*/, '').replace(/\s*-+$/, '');
                html += `<tr><td colspan="3" style="background:${p.color}15;color:${p.color};font-weight:600;text-align:center;padding:12px">${headerText}</td></tr>`;
              } else {
                const rowClass = row.sync ? 'sync-row' : '';
                const arrow = row.sync ? '‚Üí' : '';
                html += `<tr class="${rowClass}"><td>${row.laravel}</td><td class="arrow">${arrow}</td><td>${row.odoo}</td></tr>`;
              }
            });
            html += `</table>`;
          });
        }
        if (p.keyPoint)
          html += `<div class="highlight" style="border-color:${p.color}"><strong>${p.keyPoint}</strong></div>`;
        html += `</div>`;

        // Data Ownership
        html += `<div class="section"><h3 style="border-color:${p.color}">Data Ownership</h3>`;
        html += `<table><tr><th>Data</th><th>SERP</th><th>Odoo</th></tr>`;
        p.dataOwnership.forEach((row) => {
          const laravelClass = row.laravel.includes('Owner') ? 'owner-cell' : 'copy-cell';
          const odooClass = row.odoo.includes('Owner') ? 'owner-cell' : 'copy-cell';
          html += `<tr><td>${row.data}</td><td class="${laravelClass}">${row.laravel}</td><td class="${odooClass}">${row.odoo}</td></tr>`;
        });
        html += `</table></div>`;

        // Implementation
        html += `<div class="section"><h3 style="border-color:${p.color}">Implementation Details</h3>`;
        if (Array.isArray(p.implementation)) {
          html += `<ul>`;
          p.implementation.forEach((item) => {
            if (item.startsWith('---') && item.endsWith('---')) {
              const headerText = item.replace(/^-+\s*/, '').replace(/\s*-+$/, '');
              html += `</ul><h4 style="margin-top:20px;color:${p.color}">${headerText}</h4><ul>`;
            } else {
              html += `<li>${item}</li>`;
            }
          });
          html += `</ul>`;
        } else {
          Object.entries(p.implementation).forEach(([header, items]) => {
            html += `<h4>${header}</h4><ul>`;
            items.forEach((item) => {
              if (item.startsWith('---')) {
                const headerText = item.replace(/^-+\s*/, '').replace(/\s*-+$/, '');
                html += `</ul><h4 style="color:${p.color}">${headerText}</h4><ul>`;
              } else {
                html += `<li>${item}</li>`;
              }
            });
            html += `</ul>`;
          });
        }
        html += `</div>`;

        // Cutover Checklist
        if (p.cutoverChecklist && p.cutoverChecklist.length) {
          html += `<div class="section"><h3 style="border-color:${p.color}">Cutover Checklist</h3><ul>`;
          p.cutoverChecklist.forEach((item) => (html += `<li>‚òê ${item}</li>`));
          html += `</ul></div>`;
        }

        // Confirmations
        if (p.confirmations && p.confirmations.length) {
          html += `<div class="section"><h3 style="border-color:${p.color}">Team Confirmations Before Launch</h3><ul>`;
          p.confirmations.forEach((item) => (html += `<li>${item}</li>`));
          html += `</ul></div>`;
        }

        // Timeline
        html += `<div class="section"><h3 style="border-color:${p.color}">Timeline</h3>`;
        html += `<div class="gantt-container"><div class="gantt-header"><div class="gantt-label">Task</div><div class="gantt-weeks">`;
        for (let w = 1; w <= p.weeks; w++) {
          const weekStart = addDays(start, (w - 1) * 7);
          html += `<div class="week-col">W${w}<br><span class="week-dates">${fmt(weekStart)}</span></div>`;
        }
        html += `</div></div>`;
        p.tasks.forEach((task) => {
          const left = ((task.startWeek - 1) / p.weeks) * 100;
          const width = (task.duration / p.weeks) * 100;
          html += `<div class="gantt-row"><div class="task-label">${task.name}</div>`;
          html += `<div class="task-track">${Array(p.weeks).fill('<div class="task-cell"></div>').join('')}`;
          html += `<div class="task-bar" style="left:${left}%;width:${width}%;background:${p.color}">${task.duration}w</div></div></div>`;
        });
        html += `</div></div>`;

        html += `</div></div>`;
        return html;
      }

      function togglePhase(id) {
        const content = document.getElementById(`phase-content-${id}`);
        const header = content.previousElementSibling;
        content.classList.toggle('hide');
        header.classList.toggle('collapsed');
      }

      function render() {
        const scheds = calcSchedules();
        const start = new Date(project.startDate);
        const end = scheds.reduce((max, s) => s.end > max ? s.end : max, scheds[0].end);

        document.getElementById('meta').textContent =
          `${fmtFull(start)} ‚Üí ${fmtFull(end)} | ${project.preparedBy}`;

        const totalWeeks = Math.ceil((end - start) / (7 * 24 * 60 * 60 * 1000));
        const totalTasks = phases.reduce((s, p) => s + p.tasks.length, 0);
        document.getElementById('summary').innerHTML = `
    <div class="summary-card"><div class="value">${phases.length}</div><div class="label">Phases</div></div>
    <div class="summary-card"><div class="value">${totalWeeks}</div><div class="label">Weeks</div></div>
    <div class="summary-card"><div class="value">${totalTasks}</div><div class="label">Tasks</div></div>
    <div class="summary-card"><div class="value">${fmt(end)}</div><div class="label">Target</div></div>
  `;

        const months = [];
        let cur = new Date(start);
        while (cur <= end) {
          months.push(cur.toLocaleDateString('en-US', { month: 'short', year: '2-digit' }));
          cur = new Date(cur.getFullYear(), cur.getMonth() + 1, 1);
        }
        document.getElementById('months').innerHTML = months
          .map((m) => `<div class="month-col">${m}</div>`)
          .join('');

        const totalDays = (end - start) / (24 * 60 * 60 * 1000);
        document.getElementById('timeline').innerHTML = scheds
          .map((s) => {
            const left = ((s.start - start) / (24 * 60 * 60 * 1000) / totalDays) * 100;
            const width = ((s.end - s.start) / (24 * 60 * 60 * 1000) / totalDays) * 100;
            const parallelLabel = s.isParallel ? ' ‚à•' : '';
            return `<div class="phase-row">
      <div class="phase-label">Phase ${s.phase.id}: ${s.phase.shortName}${parallelLabel}</div>
      <div class="phase-track">
        <div class="phase-bar" style="left:${left}%;width:${width}%;background:${s.phase.color}">
          <span>${s.phase.name}</span>
          <span class="phase-dates">${fmt(s.start)} ‚Üí ${fmt(s.end)}</span>
        </div>
      </div>
    </div>`;
          })
          .join('');

        // Render migration events with calculated dates
        document.getElementById('migration-events').innerHTML = migrationEvents
          .map((evt) => {
            const phaseSched = scheds.find((s) => s.phase.id === evt.phase);
            const eventDate = addDays(phaseSched.start, (evt.week - 1) * 7);
            return `<div class="migration-event">
      <div class="migration-event-phase" style="color:${evt.color}">Phase ${evt.phase}</div>
      <div class="migration-event-week">Week ${evt.week}<br><span style="font-size:0.8em">${fmt(eventDate)}</span></div>
      <div class="migration-event-info">
        <div class="migration-event-name">${evt.name}</div>
        <div class="migration-event-desc">${evt.desc}</div>
        <div class="migration-event-tables">${evt.tables.map((t) => `<code>${t}</code>`).join('')}</div>
      </div>
    </div>`;
          })
          .join('');

        document.getElementById('milestones').innerHTML = scheds
          .map(
            (s) => `
    <div class="milestone-item">
      <div class="milestone-dot" style="background:${s.phase.color}"></div>
      <div class="milestone-info">
        <div class="milestone-name">${s.phase.milestone}</div>
        <div class="milestone-phase">Phase ${s.phase.id}</div>
      </div>
      <div class="milestone-date">${fmtFull(s.end)}</div>
    </div>
  `
          )
          .join('');

        document.getElementById('phases-detail').innerHTML = scheds
          .map((s) => renderPhaseDetail(s))
          .join('');
      }

      render();
    </script>
  </body>
</html>
